{"version":3,"file":"354e98b0fb900bead87f.chunk.js","mappings":"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","sources":["webpack://superset/./src/dashboard/util/propShapes.jsx","webpack://superset/./src/dashboard/components/nativeFilters/FilterBar/keyValue.tsx","webpack://superset/./src/dashboard/util/getChartIdsFromLayout.js","webpack://superset/./src/dashboard/util/isDashboardEmpty.ts","webpack://superset/./src/dashboard/components/Dashboard.jsx","webpack://superset/./src/dashboard/util/getLayoutComponentFromChartId.js","webpack://superset/./src/dashboard/util/charts/getOwnDataCharts.ts","webpack://superset/./src/dashboard/containers/Dashboard.ts","webpack://superset/./src/dashboard/styles.ts","webpack://superset/./src/dashboard/components/SyncDashboardState/index.tsx","webpack://superset/./src/dashboard/containers/DashboardPage.tsx","webpack://superset/./src/dashboard/util/activeAllDashboardFilters.ts","webpack://superset/./src/dashboard/util/backgroundStyleOptions.ts","webpack://superset/./src/dashboard/util/headerStyleOptions.ts","webpack://superset/./src/dashboard/util/injectCustomCss.ts","webpack://superset/./src/hooks/apiResources/catalogs.ts","webpack://superset/./src/hooks/apiResources/charts.ts","webpack://superset/./src/hooks/apiResources/dashboards.ts","webpack://superset/./src/hooks/apiResources/queryValidations.ts"],"sourcesContent":["/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport PropTypes from 'prop-types';\nimport componentTypes from './componentTypes';\nimport backgroundStyleOptions from './backgroundStyleOptions';\nimport headerStyleOptions from './headerStyleOptions';\n\nexport const componentShape = PropTypes.shape({\n  id: PropTypes.string.isRequired,\n  type: PropTypes.oneOf(Object.values(componentTypes)).isRequired,\n  parents: PropTypes.arrayOf(PropTypes.string),\n  children: PropTypes.arrayOf(PropTypes.string),\n  meta: PropTypes.shape({\n    // Dimensions\n    width: PropTypes.number,\n    height: PropTypes.number,\n\n    // Header\n    headerSize: PropTypes.oneOf(headerStyleOptions.map(opt => opt.value)),\n\n    // Row\n    background: PropTypes.oneOf(backgroundStyleOptions.map(opt => opt.value)),\n\n    // Chart\n    chartId: PropTypes.number,\n  }),\n});\n\nexport const chartPropShape = PropTypes.shape({\n  id: PropTypes.number.isRequired,\n  chartAlert: PropTypes.string,\n  chartStatus: PropTypes.string,\n  chartUpdateEndTime: PropTypes.number,\n  chartUpdateStartTime: PropTypes.number,\n  latestQueryFormData: PropTypes.object,\n  queryController: PropTypes.shape({ abort: PropTypes.func }),\n  queriesResponse: PropTypes.arrayOf(PropTypes.object),\n  triggerQuery: PropTypes.bool,\n  lastRendered: PropTypes.number,\n});\n\nexport const slicePropShape = PropTypes.shape({\n  slice_id: PropTypes.number.isRequired,\n  slice_url: PropTypes.string.isRequired,\n  slice_name: PropTypes.string.isRequired,\n  datasource: PropTypes.string,\n  datasource_name: PropTypes.string,\n  datasource_link: PropTypes.string,\n  changed_on: PropTypes.number.isRequired,\n  modified: PropTypes.string,\n  viz_type: PropTypes.string.isRequired,\n  description: PropTypes.string,\n  description_markeddown: PropTypes.string,\n  owners: PropTypes.arrayOf(PropTypes.string),\n});\n\nexport const dashboardFilterPropShape = PropTypes.shape({\n  chartId: PropTypes.number.isRequired,\n  componentId: PropTypes.string.isRequired,\n  filterName: PropTypes.string.isRequired,\n  datasourceId: PropTypes.string.isRequired,\n  directPathToFilter: PropTypes.arrayOf(PropTypes.string).isRequired,\n  isDateFilter: PropTypes.bool.isRequired,\n  isInstantFilter: PropTypes.bool.isRequired,\n  columns: PropTypes.object,\n  labels: PropTypes.object,\n  scopes: PropTypes.object,\n});\n\nexport const dashboardStatePropShape = PropTypes.shape({\n  sliceIds: PropTypes.arrayOf(PropTypes.number),\n  expandedSlices: PropTypes.object,\n  editMode: PropTypes.bool,\n  isPublished: PropTypes.bool,\n  colorNamespace: PropTypes.string,\n  colorScheme: PropTypes.string,\n  updatedColorScheme: PropTypes.bool,\n  hasUnsavedChanges: PropTypes.bool,\n});\n\nexport const dashboardInfoPropShape = PropTypes.shape({\n  id: PropTypes.number,\n  metadata: PropTypes.object,\n  slug: PropTypes.string,\n  dash_edit_perm: PropTypes.bool,\n  dash_save_perm: PropTypes.bool,\n  common: PropTypes.object,\n  userId: PropTypes.string,\n});\n\n/* eslint-disable-next-line  no-undef */\nconst lazyFunction = f => () => f().apply(this, arguments);\n\nconst leafType = PropTypes.shape({\n  value: PropTypes.oneOfType([PropTypes.number, PropTypes.string]).isRequired,\n  label: PropTypes.string.isRequired,\n});\n\nconst parentShape = {\n  value: PropTypes.oneOfType([PropTypes.number, PropTypes.string]).isRequired,\n  label: PropTypes.string.isRequired,\n  children: PropTypes.arrayOf(\n    PropTypes.oneOfType([\n      PropTypes.shape(lazyFunction(() => parentShape)),\n      leafType,\n    ]),\n  ),\n};\n\nexport const filterScopeSelectorTreeNodePropShape = PropTypes.oneOfType([\n  PropTypes.shape(parentShape),\n  leafType,\n]);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { SupersetClient, logging } from '@superset-ui/core';\nimport { DashboardPermalinkValue } from 'src/dashboard/types';\n\nconst assembleEndpoint = (\n  dashId: string | number,\n  key?: string | null,\n  tabId?: string,\n) => {\n  let endpoint = `api/v1/dashboard/${dashId}/filter_state`;\n  if (key) {\n    endpoint = endpoint.concat(`/${key}`);\n  }\n  if (tabId) {\n    endpoint = endpoint.concat(`?tab_id=${tabId}`);\n  }\n  return endpoint;\n};\n\nexport const updateFilterKey = (\n  dashId: string,\n  value: string,\n  key: string,\n  tabId?: string,\n) =>\n  SupersetClient.put({\n    endpoint: assembleEndpoint(dashId, key, tabId),\n    jsonPayload: { value },\n  })\n    .then(r => r.json.message)\n    .catch(err => {\n      logging.error(err);\n      return null;\n    });\n\nexport const createFilterKey = (\n  dashId: string | number,\n  value: string,\n  tabId?: string,\n) =>\n  SupersetClient.post({\n    endpoint: assembleEndpoint(dashId, undefined, tabId),\n    jsonPayload: { value },\n  })\n    .then(r => r.json.key as string)\n    .catch(err => {\n      logging.error(err);\n      return null;\n    });\n\nexport const getFilterValue = (dashId: string | number, key?: string | null) =>\n  SupersetClient.get({\n    endpoint: assembleEndpoint(dashId, key),\n  })\n    .then(({ json }) => JSON.parse(json.value))\n    .catch(err => {\n      logging.error(err);\n      return null;\n    });\n\nexport const getPermalinkValue = (key: string) =>\n  SupersetClient.get({\n    endpoint: `/api/v1/dashboard/permalink/${key}`,\n  })\n    .then(({ json }) => json as DashboardPermalinkValue)\n    .catch(err => {\n      logging.error(err);\n      return null;\n    });\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { CHART_TYPE } from './componentTypes';\n\nexport default function getChartIdsFromLayout(layout) {\n  return Object.values(layout).reduce((chartIds, currentComponent) => {\n    if (\n      currentComponent &&\n      currentComponent.type === CHART_TYPE &&\n      currentComponent.meta &&\n      currentComponent.meta.chartId\n    ) {\n      chartIds.push(currentComponent.meta.chartId);\n    }\n    return chartIds;\n  }, []);\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { CHART_TYPE, MARKDOWN_TYPE, DYNAMIC_TYPE } from './componentTypes';\n\nconst USER_CONTENT_COMPONENT_TYPE: string[] = [\n  CHART_TYPE,\n  MARKDOWN_TYPE,\n  DYNAMIC_TYPE,\n];\nexport default function isDashboardEmpty(layout: any): boolean {\n  // has at least one chart or markdown component\n  return !Object.values(layout).some(\n    ({ type }: { type?: string }) =>\n      type && USER_CONTENT_COMPONENT_TYPE.includes(type),\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { PureComponent } from 'react';\nimport PropTypes from 'prop-types';\nimport { isFeatureEnabled, t, FeatureFlag } from '@superset-ui/core';\n\nimport { PluginContext } from 'src/components/DynamicPlugins';\nimport Loading from 'src/components/Loading';\nimport getBootstrapData from 'src/utils/getBootstrapData';\nimport getChartIdsFromLayout from '../util/getChartIdsFromLayout';\nimport getLayoutComponentFromChartId from '../util/getLayoutComponentFromChartId';\n\nimport {\n  slicePropShape,\n  dashboardInfoPropShape,\n  dashboardStatePropShape,\n} from '../util/propShapes';\nimport {\n  LOG_ACTIONS_HIDE_BROWSER_TAB,\n  LOG_ACTIONS_MOUNT_DASHBOARD,\n  Logger,\n} from '../../logger/LogUtils';\nimport { areObjectsEqual } from '../../reduxUtils';\n\nimport getLocationHash from '../util/getLocationHash';\nimport isDashboardEmpty from '../util/isDashboardEmpty';\nimport { getAffectedOwnDataCharts } from '../util/charts/getOwnDataCharts';\n\nconst propTypes = {\n  actions: PropTypes.shape({\n    addSliceToDashboard: PropTypes.func.isRequired,\n    removeSliceFromDashboard: PropTypes.func.isRequired,\n    triggerQuery: PropTypes.func.isRequired,\n    logEvent: PropTypes.func.isRequired,\n    clearDataMaskState: PropTypes.func.isRequired,\n  }).isRequired,\n  dashboardInfo: dashboardInfoPropShape.isRequired,\n  dashboardState: dashboardStatePropShape.isRequired,\n  slices: PropTypes.objectOf(slicePropShape).isRequired,\n  activeFilters: PropTypes.object.isRequired,\n  chartConfiguration: PropTypes.object,\n  datasources: PropTypes.object.isRequired,\n  ownDataCharts: PropTypes.object.isRequired,\n  layout: PropTypes.object.isRequired,\n  impressionId: PropTypes.string.isRequired,\n  timeout: PropTypes.number,\n  userId: PropTypes.string,\n};\n\nconst defaultProps = {\n  timeout: 60,\n  userId: '',\n};\n\nclass Dashboard extends PureComponent {\n  static contextType = PluginContext;\n\n  static onBeforeUnload(hasChanged) {\n    if (hasChanged) {\n      window.addEventListener('beforeunload', Dashboard.unload);\n    } else {\n      window.removeEventListener('beforeunload', Dashboard.unload);\n    }\n  }\n\n  static unload() {\n    const message = t('You have unsaved changes.');\n    window.event.returnValue = message; // Gecko + IE\n    return message; // Gecko + Webkit, Safari, Chrome etc.\n  }\n\n  constructor(props) {\n    super(props);\n    this.appliedFilters = props.activeFilters ?? {};\n    this.appliedOwnDataCharts = props.ownDataCharts ?? {};\n    this.onVisibilityChange = this.onVisibilityChange.bind(this);\n  }\n\n  componentDidMount() {\n    const bootstrapData = getBootstrapData();\n    const { dashboardState, layout } = this.props;\n    const eventData = {\n      is_soft_navigation: Logger.timeOriginOffset > 0,\n      is_edit_mode: dashboardState.editMode,\n      mount_duration: Logger.getTimestamp(),\n      is_empty: isDashboardEmpty(layout),\n      is_published: dashboardState.isPublished,\n      bootstrap_data_length: bootstrapData.length,\n    };\n    const directLinkComponentId = getLocationHash();\n    if (directLinkComponentId) {\n      eventData.target_id = directLinkComponentId;\n    }\n    this.props.actions.logEvent(LOG_ACTIONS_MOUNT_DASHBOARD, eventData);\n\n    // Handle browser tab visibility change\n    if (document.visibilityState === 'hidden') {\n      this.visibilityEventData = {\n        start_offset: Logger.getTimestamp(),\n        ts: new Date().getTime(),\n      };\n    }\n    window.addEventListener('visibilitychange', this.onVisibilityChange);\n    this.applyCharts();\n  }\n\n  componentDidUpdate() {\n    this.applyCharts();\n  }\n\n  UNSAFE_componentWillReceiveProps(nextProps) {\n    const currentChartIds = getChartIdsFromLayout(this.props.layout);\n    const nextChartIds = getChartIdsFromLayout(nextProps.layout);\n\n    if (this.props.dashboardInfo.id !== nextProps.dashboardInfo.id) {\n      // single-page-app navigation check\n      return;\n    }\n\n    if (currentChartIds.length < nextChartIds.length) {\n      const newChartIds = nextChartIds.filter(\n        key => currentChartIds.indexOf(key) === -1,\n      );\n      newChartIds.forEach(newChartId =>\n        this.props.actions.addSliceToDashboard(\n          newChartId,\n          getLayoutComponentFromChartId(nextProps.layout, newChartId),\n        ),\n      );\n    } else if (currentChartIds.length > nextChartIds.length) {\n      // remove chart\n      const removedChartIds = currentChartIds.filter(\n        key => nextChartIds.indexOf(key) === -1,\n      );\n      removedChartIds.forEach(removedChartId =>\n        this.props.actions.removeSliceFromDashboard(removedChartId),\n      );\n    }\n  }\n\n  applyCharts() {\n    const { hasUnsavedChanges, editMode } = this.props.dashboardState;\n\n    const { appliedFilters, appliedOwnDataCharts } = this;\n    const { activeFilters, ownDataCharts, chartConfiguration } = this.props;\n    if (\n      isFeatureEnabled(FeatureFlag.DashboardCrossFilters) &&\n      !chartConfiguration\n    ) {\n      // For a first loading we need to wait for cross filters charts data loaded to get all active filters\n      // for correct comparing  of filters to avoid unnecessary requests\n      return;\n    }\n\n    if (\n      !editMode &&\n      (!areObjectsEqual(appliedOwnDataCharts, ownDataCharts, {\n        ignoreUndefined: true,\n      }) ||\n        !areObjectsEqual(appliedFilters, activeFilters, {\n          ignoreUndefined: true,\n        }))\n    ) {\n      this.applyFilters();\n    }\n\n    if (hasUnsavedChanges) {\n      Dashboard.onBeforeUnload(true);\n    } else {\n      Dashboard.onBeforeUnload(false);\n    }\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('visibilitychange', this.onVisibilityChange);\n    this.props.actions.clearDataMaskState();\n  }\n\n  onVisibilityChange() {\n    if (document.visibilityState === 'hidden') {\n      // from visible to hidden\n      this.visibilityEventData = {\n        start_offset: Logger.getTimestamp(),\n        ts: new Date().getTime(),\n      };\n    } else if (document.visibilityState === 'visible') {\n      // from hidden to visible\n      const logStart = this.visibilityEventData.start_offset;\n      this.props.actions.logEvent(LOG_ACTIONS_HIDE_BROWSER_TAB, {\n        ...this.visibilityEventData,\n        duration: Logger.getTimestamp() - logStart,\n      });\n    }\n  }\n\n  applyFilters() {\n    const { appliedFilters } = this;\n    const { activeFilters, ownDataCharts } = this.props;\n\n    // refresh charts if a filter was removed, added, or changed\n    const currFilterKeys = Object.keys(activeFilters);\n    const appliedFilterKeys = Object.keys(appliedFilters);\n\n    const allKeys = new Set(currFilterKeys.concat(appliedFilterKeys));\n    const affectedChartIds = getAffectedOwnDataCharts(\n      ownDataCharts,\n      this.appliedOwnDataCharts,\n    );\n    [...allKeys].forEach(filterKey => {\n      if (\n        !currFilterKeys.includes(filterKey) &&\n        appliedFilterKeys.includes(filterKey)\n      ) {\n        // filterKey is removed?\n        affectedChartIds.push(...appliedFilters[filterKey].scope);\n      } else if (!appliedFilterKeys.includes(filterKey)) {\n        // filterKey is newly added?\n        affectedChartIds.push(...activeFilters[filterKey].scope);\n      } else {\n        // if filterKey changes value,\n        // update charts in its scope\n        if (\n          !areObjectsEqual(\n            appliedFilters[filterKey].values,\n            activeFilters[filterKey].values,\n            {\n              ignoreUndefined: true,\n            },\n          )\n        ) {\n          affectedChartIds.push(...activeFilters[filterKey].scope);\n        }\n\n        // if filterKey changes scope,\n        // update all charts in its scope\n        if (\n          !areObjectsEqual(\n            appliedFilters[filterKey].scope,\n            activeFilters[filterKey].scope,\n          )\n        ) {\n          const chartsInScope = (activeFilters[filterKey].scope || []).concat(\n            appliedFilters[filterKey].scope || [],\n          );\n          affectedChartIds.push(...chartsInScope);\n        }\n      }\n    });\n\n    // remove dup in affectedChartIds\n    this.refreshCharts([...new Set(affectedChartIds)]);\n    this.appliedFilters = activeFilters;\n    this.appliedOwnDataCharts = ownDataCharts;\n  }\n\n  refreshCharts(ids) {\n    ids.forEach(id => {\n      this.props.actions.triggerQuery(true, id);\n    });\n  }\n\n  render() {\n    if (this.context.loading) {\n      return <Loading />;\n    }\n    return this.props.children;\n  }\n}\n\nDashboard.propTypes = propTypes;\nDashboard.defaultProps = defaultProps;\n\nexport default Dashboard;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n/* eslint-disable no-param-reassign */\nimport { CHART_TYPE } from './componentTypes';\n\nexport default function getLayoutComponentFromChartId(layout, chartId) {\n  return Object.values(layout).find(\n    currentComponent =>\n      currentComponent &&\n      currentComponent.type === CHART_TYPE &&\n      currentComponent.meta &&\n      currentComponent.meta.chartId === chartId,\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { JsonObject } from '@superset-ui/core';\nimport { areObjectsEqual } from '../../../reduxUtils';\n\nexport const arrayDiff = (a: string[], b: string[]) => [\n  ...a.filter(x => !b.includes(x)),\n  ...b.filter(x => !a.includes(x)),\n];\n\nexport const getAffectedOwnDataCharts = (\n  ownDataCharts: JsonObject,\n  appliedOwnDataCharts: JsonObject,\n) => {\n  const chartIds = Object.keys(ownDataCharts);\n  const appliedChartIds = Object.keys(appliedOwnDataCharts);\n  const affectedIds: string[] = arrayDiff(chartIds, appliedChartIds).filter(\n    id => ownDataCharts[id] || appliedOwnDataCharts[id],\n  );\n  const checkForUpdateIds = new Set<string>([...chartIds, ...appliedChartIds]);\n  checkForUpdateIds.forEach(chartId => {\n    if (\n      !areObjectsEqual(ownDataCharts[chartId], appliedOwnDataCharts[chartId])\n    ) {\n      affectedIds.push(chartId);\n    }\n  });\n  return [...new Set(affectedIds)];\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { bindActionCreators, Dispatch } from 'redux';\nimport { connect } from 'react-redux';\nimport { RootState } from 'src/dashboard/types';\nimport Dashboard from 'src/dashboard/components/Dashboard';\nimport {\n  addSliceToDashboard,\n  removeSliceFromDashboard,\n} from 'src/dashboard/actions/dashboardState';\nimport { setDatasources } from 'src/dashboard/actions/datasources';\n\nimport { triggerQuery } from 'src/components/Chart/chartAction';\nimport { logEvent } from 'src/logger/actions';\nimport { getActiveFilters } from 'src/dashboard/util/activeDashboardFilters';\nimport {\n  getAllActiveFilters,\n  getRelevantDataMask,\n} from 'src/dashboard/util/activeAllDashboardFilters';\nimport { clearDataMaskState } from '../../dataMask/actions';\n\nfunction mapStateToProps(state: RootState) {\n  const {\n    datasources,\n    sliceEntities,\n    dataMask,\n    dashboardInfo,\n    dashboardState,\n    dashboardLayout,\n    impressionId,\n    nativeFilters,\n  } = state;\n\n  return {\n    timeout: dashboardInfo.common?.conf?.SUPERSET_WEBSERVER_TIMEOUT,\n    userId: dashboardInfo.userId,\n    dashboardInfo,\n    dashboardState,\n    datasources,\n    // filters prop: a map structure for all the active filter's values and scope in this dashboard,\n    // for each filter field. map key is [chartId_column]\n    // When dashboard is first loaded into browser,\n    // its value is from preselect_filters that dashboard owner saved in dashboard's meta data\n    activeFilters: {\n      ...getActiveFilters(),\n      ...getAllActiveFilters({\n        // eslint-disable-next-line camelcase\n        chartConfiguration: dashboardInfo.metadata?.chart_configuration,\n        nativeFilters: nativeFilters.filters,\n        dataMask,\n        allSliceIds: dashboardState.sliceIds,\n      }),\n    },\n    chartConfiguration: dashboardInfo.metadata?.chart_configuration,\n    ownDataCharts: getRelevantDataMask(dataMask, 'ownState'),\n    slices: sliceEntities.slices,\n    layout: dashboardLayout.present,\n    impressionId,\n  };\n}\n\nfunction mapDispatchToProps(dispatch: Dispatch) {\n  return {\n    actions: bindActionCreators(\n      {\n        setDatasources,\n        clearDataMaskState,\n        addSliceToDashboard,\n        removeSliceFromDashboard,\n        triggerQuery,\n        logEvent,\n      },\n      dispatch,\n    ),\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Dashboard);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { css, SupersetTheme } from '@superset-ui/core';\n\nexport const headerStyles = (theme: SupersetTheme) => css`\n  body {\n    h1 {\n      font-weight: ${theme.typography.weights.bold};\n      line-height: 1.4;\n      font-size: ${theme.typography.sizes.xxl}px;\n      letter-spacing: -0.2px;\n      margin-top: ${theme.gridUnit * 3}px;\n      margin-bottom: ${theme.gridUnit * 3}px;\n    }\n\n    h2 {\n      font-weight: ${theme.typography.weights.bold};\n      line-height: 1.4;\n      font-size: ${theme.typography.sizes.xl}px;\n      margin-top: ${theme.gridUnit * 3}px;\n      margin-bottom: ${theme.gridUnit * 2}px;\n    }\n\n    h3,\n    h4,\n    h5,\n    h6 {\n      font-weight: ${theme.typography.weights.bold};\n      line-height: 1.4;\n      font-size: ${theme.typography.sizes.l}px;\n      letter-spacing: 0.2px;\n      margin-top: ${theme.gridUnit * 2}px;\n      margin-bottom: ${theme.gridUnit}px;\n    }\n  }\n`;\n\n// adds enough margin and padding so that the focus outline styles will fit\nexport const chartHeaderStyles = (theme: SupersetTheme) => css`\n  .header-title a {\n    margin: ${theme.gridUnit / 2}px;\n    padding: ${theme.gridUnit / 2}px;\n  }\n  .header-controls {\n    &,\n    &:hover {\n      margin-top: ${theme.gridUnit}px;\n    }\n  }\n`;\n\nexport const filterCardPopoverStyle = (theme: SupersetTheme) => css`\n  .filter-card-popover {\n    width: 240px;\n    padding: 0;\n    border-radius: 4px;\n\n    &.ant-popover-placement-bottom {\n      padding-top: ${theme.gridUnit}px;\n    }\n\n    &.ant-popover-placement-left {\n      padding-right: ${theme.gridUnit * 3}px;\n    }\n\n    .ant-popover-inner {\n      box-shadow: 0 0 8px rgb(0 0 0 / 10%);\n    }\n\n    .ant-popover-inner-content {\n      padding: ${theme.gridUnit * 4}px;\n    }\n\n    .ant-popover-arrow {\n      display: none;\n    }\n  }\n\n  .filter-card-tooltip {\n    &.ant-tooltip-placement-bottom {\n      padding-top: 0;\n      & .ant-tooltip-arrow {\n        top: -13px;\n      }\n    }\n  }\n`;\n\nexport const chartContextMenuStyles = (theme: SupersetTheme) => css`\n  .ant-dropdown-menu.chart-context-menu {\n    min-width: ${theme.gridUnit * 43}px;\n  }\n  .ant-dropdown-menu-submenu.chart-context-submenu {\n    max-width: ${theme.gridUnit * 60}px;\n    min-width: ${theme.gridUnit * 40}px;\n  }\n`;\n\nexport const focusStyle = (theme: SupersetTheme) => css`\n  a,\n  .ant-tabs-tabpane,\n  .ant-tabs-tab-btn,\n  .superset-button,\n  .superset-button.ant-dropdown-trigger,\n  .header-controls span {\n    &:focus-visible {\n      box-shadow: 0 0 0 2px ${theme.colors.primary.dark1};\n      border-radius: ${theme.gridUnit / 2}px;\n      outline: none;\n      text-decoration: none;\n    }\n    &:not(\n        .superset-button,\n        .ant-menu-item,\n        a,\n        .fave-unfave-icon,\n        .ant-tabs-tabpane,\n        .header-controls span\n      ) {\n      &:focus-visible {\n        padding: ${theme.gridUnit / 2}px;\n      }\n    }\n  }\n`;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { FC, useEffect } from 'react';\n\nimport { pick } from 'lodash';\nimport { shallowEqual, useSelector } from 'react-redux';\nimport { DashboardContextForExplore } from 'src/types/DashboardContextForExplore';\nimport {\n  getItem,\n  LocalStorageKeys,\n  setItem,\n} from 'src/utils/localStorageHelpers';\nimport { RootState } from 'src/dashboard/types';\nimport { getActiveFilters } from 'src/dashboard/util/activeDashboardFilters';\n\ntype Props = { dashboardPageId: string };\n\nconst EMPTY_OBJECT = {};\n\nexport const getDashboardContextLocalStorage = () => {\n  const dashboardsContexts = getItem(\n    LocalStorageKeys.DashboardExploreContext,\n    {},\n  );\n  // A new dashboard tab id is generated on each dashboard page opening.\n  // We mark ids as redundant when user leaves the dashboard, because they won't be reused.\n  // Then we remove redundant dashboard contexts from local storage in order not to clutter it\n  return Object.fromEntries(\n    Object.entries(dashboardsContexts).filter(\n      ([, value]) => !value.isRedundant,\n    ),\n  );\n};\n\nconst updateDashboardTabLocalStorage = (\n  dashboardPageId: string,\n  dashboardContext: DashboardContextForExplore,\n) => {\n  const dashboardsContexts = getDashboardContextLocalStorage();\n  setItem(LocalStorageKeys.DashboardExploreContext, {\n    ...dashboardsContexts,\n    [dashboardPageId]: dashboardContext,\n  });\n};\n\nconst SyncDashboardState: FC<Props> = ({ dashboardPageId }) => {\n  const dashboardContextForExplore = useSelector<\n    RootState,\n    DashboardContextForExplore\n  >(\n    ({ dashboardInfo, dashboardState, nativeFilters, dataMask }) => ({\n      labelsColor: dashboardInfo.metadata?.label_colors || EMPTY_OBJECT,\n      labelsColorMap:\n        dashboardInfo.metadata?.shared_label_colors || EMPTY_OBJECT,\n      colorScheme: dashboardState?.colorScheme,\n      chartConfiguration:\n        dashboardInfo.metadata?.chart_configuration || EMPTY_OBJECT,\n      nativeFilters: Object.entries(nativeFilters.filters).reduce(\n        (acc, [key, filterValue]) => ({\n          ...acc,\n          [key]: pick(filterValue, ['chartsInScope']),\n        }),\n        {},\n      ),\n      dataMask,\n      dashboardId: dashboardInfo.id,\n      filterBoxFilters: getActiveFilters(),\n      dashboardPageId,\n    }),\n    shallowEqual,\n  );\n\n  useEffect(() => {\n    updateDashboardTabLocalStorage(dashboardPageId, dashboardContextForExplore);\n    return () => {\n      // mark tab id as redundant when dashboard unmounts - case when user opens\n      // Explore in the same tab\n      updateDashboardTabLocalStorage(dashboardPageId, {\n        ...dashboardContextForExplore,\n        isRedundant: true,\n      });\n    };\n  }, [dashboardContextForExplore, dashboardPageId]);\n\n  return null;\n};\n\nexport default SyncDashboardState;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { createContext, lazy, FC, useEffect, useMemo, useRef } from 'react';\nimport { Global } from '@emotion/react';\nimport { useHistory } from 'react-router-dom';\nimport { t, useTheme } from '@superset-ui/core';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useToasts } from 'src/components/MessageToasts/withToasts';\nimport Loading from 'src/components/Loading';\nimport {\n  useDashboard,\n  useDashboardCharts,\n  useDashboardDatasets,\n} from 'src/hooks/apiResources';\nimport { hydrateDashboard } from 'src/dashboard/actions/hydrate';\nimport { setDatasources } from 'src/dashboard/actions/datasources';\nimport injectCustomCss from 'src/dashboard/util/injectCustomCss';\n\nimport { LocalStorageKeys, setItem } from 'src/utils/localStorageHelpers';\nimport { URL_PARAMS } from 'src/constants';\nimport { getUrlParam } from 'src/utils/urlUtils';\nimport { setDatasetsStatus } from 'src/dashboard/actions/dashboardState';\nimport {\n  getFilterValue,\n  getPermalinkValue,\n} from 'src/dashboard/components/nativeFilters/FilterBar/keyValue';\nimport DashboardContainer from 'src/dashboard/containers/Dashboard';\n\nimport { nanoid } from 'nanoid';\nimport { RootState } from '../types';\nimport {\n  chartContextMenuStyles,\n  filterCardPopoverStyle,\n  focusStyle,\n  headerStyles,\n  chartHeaderStyles,\n} from '../styles';\nimport SyncDashboardState, {\n  getDashboardContextLocalStorage,\n} from '../components/SyncDashboardState';\n\nexport const DashboardPageIdContext = createContext('');\n\nconst DashboardBuilder = lazy(\n  () =>\n    import(\n      /* webpackChunkName: \"DashboardContainer\" */\n      /* webpackPreload: true */\n      'src/dashboard/components/DashboardBuilder/DashboardBuilder'\n    ),\n);\n\nconst originalDocumentTitle = document.title;\n\ntype PageProps = {\n  idOrSlug: string;\n};\n\nexport const DashboardPage: FC<PageProps> = ({ idOrSlug }: PageProps) => {\n  const theme = useTheme();\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const dashboardPageId = useMemo(() => nanoid(), []);\n  const hasDashboardInfoInitiated = useSelector<RootState, Boolean>(\n    ({ dashboardInfo }) =>\n      dashboardInfo && Object.keys(dashboardInfo).length > 0,\n  );\n  const { addDangerToast } = useToasts();\n  const { result: dashboard, error: dashboardApiError } =\n    useDashboard(idOrSlug);\n  const { result: charts, error: chartsApiError } =\n    useDashboardCharts(idOrSlug);\n  const {\n    result: datasets,\n    error: datasetsApiError,\n    status,\n  } = useDashboardDatasets(idOrSlug);\n  const isDashboardHydrated = useRef(false);\n\n  const error = dashboardApiError || chartsApiError;\n  const readyToRender = Boolean(dashboard && charts);\n  const { dashboard_title, css, id = 0 } = dashboard || {};\n\n  useEffect(() => {\n    // mark tab id as redundant when user closes browser tab - a new id will be\n    // generated next time user opens a dashboard and the old one won't be reused\n    const handleTabClose = () => {\n      const dashboardsContexts = getDashboardContextLocalStorage();\n      setItem(LocalStorageKeys.DashboardExploreContext, {\n        ...dashboardsContexts,\n        [dashboardPageId]: {\n          ...dashboardsContexts[dashboardPageId],\n          isRedundant: true,\n        },\n      });\n    };\n    window.addEventListener('beforeunload', handleTabClose);\n    return () => {\n      window.removeEventListener('beforeunload', handleTabClose);\n    };\n  }, [dashboardPageId]);\n\n  useEffect(() => {\n    dispatch(setDatasetsStatus(status));\n  }, [dispatch, status]);\n\n  useEffect(() => {\n    // eslint-disable-next-line consistent-return\n    async function getDataMaskApplied() {\n      const permalinkKey = getUrlParam(URL_PARAMS.permalinkKey);\n      const nativeFilterKeyValue = getUrlParam(URL_PARAMS.nativeFiltersKey);\n      const isOldRison = getUrlParam(URL_PARAMS.nativeFilters);\n\n      let dataMask = nativeFilterKeyValue || {};\n      // activeTabs is initialized with undefined so that it doesn't override\n      // the currently stored value when hydrating\n      let activeTabs: string[] | undefined;\n      if (permalinkKey) {\n        const permalinkValue = await getPermalinkValue(permalinkKey);\n        if (permalinkValue) {\n          ({ dataMask, activeTabs } = permalinkValue.state);\n        }\n      } else if (nativeFilterKeyValue) {\n        dataMask = await getFilterValue(id, nativeFilterKeyValue);\n      }\n      if (isOldRison) {\n        dataMask = isOldRison;\n      }\n\n      if (readyToRender) {\n        if (!isDashboardHydrated.current) {\n          isDashboardHydrated.current = true;\n        }\n        dispatch(\n          hydrateDashboard({\n            history,\n            dashboard,\n            charts,\n            activeTabs,\n            dataMask,\n          }),\n        );\n      }\n      return null;\n    }\n    if (id) getDataMaskApplied();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [readyToRender]);\n\n  useEffect(() => {\n    if (dashboard_title) {\n      document.title = dashboard_title;\n    }\n    return () => {\n      document.title = originalDocumentTitle;\n    };\n  }, [dashboard_title]);\n\n  useEffect(() => {\n    if (typeof css === 'string') {\n      // returning will clean up custom css\n      // when dashboard unmounts or changes\n      return injectCustomCss(css);\n    }\n    return () => {};\n  }, [css]);\n\n  useEffect(() => {\n    if (datasetsApiError) {\n      addDangerToast(\n        t('Error loading chart datasources. Filters may not work correctly.'),\n      );\n    } else {\n      dispatch(setDatasources(datasets));\n    }\n  }, [addDangerToast, datasets, datasetsApiError, dispatch]);\n\n  if (error) throw error; // caught in error boundary\n  if (!readyToRender || !hasDashboardInfoInitiated) return <Loading />;\n\n  return (\n    <>\n      <Global\n        styles={[\n          filterCardPopoverStyle(theme),\n          headerStyles(theme),\n          chartContextMenuStyles(theme),\n          focusStyle(theme),\n          chartHeaderStyles(theme),\n        ]}\n      />\n      <SyncDashboardState dashboardPageId={dashboardPageId} />\n      <DashboardPageIdContext.Provider value={dashboardPageId}>\n        <DashboardContainer>\n          <DashboardBuilder />\n        </DashboardContainer>\n      </DashboardPageIdContext.Provider>\n    </>\n  );\n};\n\nexport default DashboardPage;\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport {\n  DataMaskStateWithId,\n  PartialFilters,\n  JsonObject,\n} from '@superset-ui/core';\nimport { ActiveFilters, ChartConfiguration } from '../types';\n\nexport const getRelevantDataMask = (\n  dataMask: DataMaskStateWithId,\n  prop: string,\n): JsonObject | DataMaskStateWithId =>\n  Object.values(dataMask)\n    .filter(item => item[prop])\n    .reduce(\n      (prev, next) => ({ ...prev, [next.id]: prop ? next[prop] : next }),\n      {},\n    );\n\nexport const getAllActiveFilters = ({\n  chartConfiguration,\n  nativeFilters,\n  dataMask,\n  allSliceIds,\n}: {\n  chartConfiguration: ChartConfiguration;\n  dataMask: DataMaskStateWithId;\n  nativeFilters: PartialFilters;\n  allSliceIds: number[];\n}): ActiveFilters => {\n  const activeFilters = {};\n\n  // Combine native filters with cross filters, because they have similar logic\n  Object.values(dataMask).forEach(({ id: filterId, extraFormData }) => {\n    const scope =\n      nativeFilters?.[filterId]?.chartsInScope ??\n      chartConfiguration?.[filterId]?.crossFilters?.chartsInScope ??\n      allSliceIds ??\n      [];\n    // Iterate over all roots to find all affected charts\n    activeFilters[filterId] = {\n      scope,\n      values: extraFormData,\n    };\n  });\n  return activeFilters;\n};\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { t } from '@superset-ui/core';\nimport { BACKGROUND_TRANSPARENT, BACKGROUND_WHITE } from './constants';\n\nexport default [\n  {\n    value: BACKGROUND_TRANSPARENT,\n    label: t('Transparent'),\n    className: 'background--transparent',\n  },\n  {\n    value: BACKGROUND_WHITE,\n    label: t('White'),\n    className: 'background--white',\n  },\n];\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { t } from '@superset-ui/core';\nimport { SMALL_HEADER, MEDIUM_HEADER, LARGE_HEADER } from './constants';\n\nexport default [\n  {\n    value: SMALL_HEADER,\n    label: t('Small'),\n    className: 'header-style-option header-small',\n  },\n  {\n    value: MEDIUM_HEADER,\n    label: t('Medium'),\n    className: 'header-style-option header-medium',\n  },\n  {\n    value: LARGE_HEADER,\n    label: t('Large'),\n    className: 'header-style-option header-large',\n  },\n];\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nfunction createStyleElement(className: string) {\n  const style = document.createElement('style');\n  style.className = className;\n  style.type = 'text/css';\n  return style;\n}\n\n// The original, non-typescript code referenced `style.styleSheet`.\n// I can't find what sort of element would have a styleSheet property,\n// so have created this type to satisfy TS without changing behavior.\ntype MysteryStyleElement = {\n  styleSheet: {\n    cssText: string;\n  };\n};\n\nexport default function injectCustomCss(css: string) {\n  const className = 'CssEditor-css';\n  const head = document.head || document.getElementsByTagName('head')[0];\n  const style: HTMLStyleElement =\n    document.querySelector(`.${className}`) || createStyleElement(className);\n\n  if ('styleSheet' in style) {\n    (style as HTMLStyleElement & MysteryStyleElement).styleSheet.cssText = css;\n  } else {\n    style.innerHTML = css;\n  }\n\n  /**\n   * Ensures that the style applied is always the last.\n   *\n   * from: https://developer.mozilla.org/en-US/docs/Web/API/Node/appendChild\n   * The Node.appendChild() method adds a node to the end of the list of children\n   * of a specified parent node. If the given child is a reference to an existing\n   * node in the document, appendChild() moves it from its current position to the\n   * new position (there is no requirement to remove the node from its parent node\n   * before appending it to some other node).\n   */\n\n  head.appendChild(style);\n\n  return function removeCustomCSS() {\n    style.remove();\n  };\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { useCallback, useEffect } from 'react';\nimport useEffectEvent from 'src/hooks/useEffectEvent';\nimport { api, JsonResponse } from './queryApi';\n\nexport type CatalogOption = {\n  value: string;\n  label: string;\n  title: string;\n};\n\nexport type FetchCatalogsQueryParams = {\n  dbId?: string | number;\n  forceRefresh: boolean;\n  onSuccess?: (data: CatalogOption[], isRefetched: boolean) => void;\n  onError?: () => void;\n};\n\ntype Params = Omit<FetchCatalogsQueryParams, 'forceRefresh'>;\n\nconst catalogApi = api.injectEndpoints({\n  endpoints: builder => ({\n    catalogs: builder.query<CatalogOption[], FetchCatalogsQueryParams>({\n      providesTags: [{ type: 'Catalogs', id: 'LIST' }],\n      query: ({ dbId, forceRefresh }) => ({\n        endpoint: `/api/v1/database/${dbId}/catalogs/`,\n        urlParams: {\n          force: forceRefresh,\n        },\n        transformResponse: ({ json }: JsonResponse) =>\n          json.result.sort().map((value: string) => ({\n            value,\n            label: value,\n            title: value,\n          })),\n      }),\n      serializeQueryArgs: ({ queryArgs: { dbId } }) => ({\n        dbId,\n      }),\n    }),\n  }),\n});\n\nexport const {\n  useLazyCatalogsQuery,\n  useCatalogsQuery,\n  endpoints: catalogEndpoints,\n  util: catalogApiUtil,\n} = catalogApi;\n\nexport const EMPTY_CATALOGS = [] as CatalogOption[];\n\nexport function useCatalogs(options: Params) {\n  const { dbId, onSuccess, onError } = options || {};\n  const [trigger] = useLazyCatalogsQuery();\n  const result = useCatalogsQuery(\n    { dbId, forceRefresh: false },\n    {\n      skip: !dbId,\n    },\n  );\n\n  const fetchData = useEffectEvent(\n    (dbId: FetchCatalogsQueryParams['dbId'], forceRefresh = false) => {\n      if (dbId && (!result.currentData || forceRefresh)) {\n        trigger({ dbId, forceRefresh }).then(({ isSuccess, isError, data }) => {\n          if (isSuccess) {\n            onSuccess?.(data || EMPTY_CATALOGS, forceRefresh);\n          }\n          if (isError) {\n            onError?.();\n          }\n        });\n      }\n    },\n  );\n\n  const refetch = useCallback(() => {\n    fetchData(dbId, true);\n  }, [dbId, fetchData]);\n\n  useEffect(() => {\n    fetchData(dbId, false);\n  }, [dbId, fetchData]);\n\n  return {\n    ...result,\n    refetch,\n  };\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport rison from 'rison';\nimport Chart from 'src/types/Chart';\nimport { useApiV1Resource, useTransformedResource } from './apiResources';\n\nfunction extractOwnerNames({ owners }: Chart) {\n  if (!owners) return null;\n  return owners.map(owner => `${owner.first_name} ${owner.last_name}`);\n}\n\nconst ownerNamesQuery = rison.encode({\n  columns: ['owners.first_name', 'owners.last_name'],\n  keys: ['none'],\n});\n\nexport function useChartOwnerNames(chartId: string) {\n  return useTransformedResource(\n    useApiV1Resource<Chart>(`/api/v1/chart/${chartId}?q=${ownerNamesQuery}`),\n    extractOwnerNames,\n  );\n}\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\n\nimport { Dashboard, Datasource, EmbeddedDashboard } from 'src/dashboard/types';\nimport { Chart } from 'src/types/Chart';\nimport { useApiV1Resource, useTransformedResource } from './apiResources';\n\nexport const useDashboard = (idOrSlug: string | number) =>\n  useTransformedResource(\n    useApiV1Resource<Dashboard>(`/api/v1/dashboard/${idOrSlug}`),\n    dashboard => ({\n      ...dashboard,\n      // TODO: load these at the API level\n      metadata:\n        (dashboard.json_metadata && JSON.parse(dashboard.json_metadata)) || {},\n      position_data:\n        dashboard.position_json && JSON.parse(dashboard.position_json),\n      owners: dashboard.owners || [],\n    }),\n  );\n\n// gets the chart definitions for a dashboard\nexport const useDashboardCharts = (idOrSlug: string | number) =>\n  useApiV1Resource<Chart[]>(`/api/v1/dashboard/${idOrSlug}/charts`);\n\n// gets the datasets for a dashboard\n// important: this endpoint only returns the fields in the dataset\n// that are necessary for rendering the given dashboard\nexport const useDashboardDatasets = (idOrSlug: string | number) =>\n  useApiV1Resource<Datasource[]>(`/api/v1/dashboard/${idOrSlug}/datasets`);\n\nexport const useEmbeddedDashboard = (idOrSlug: string | number) =>\n  useApiV1Resource<EmbeddedDashboard>(`/api/v1/dashboard/${idOrSlug}/embedded`);\n","/**\n * Licensed to the Apache Software Foundation (ASF) under one\n * or more contributor license agreements.  See the NOTICE file\n * distributed with this work for additional information\n * regarding copyright ownership.  The ASF licenses this file\n * to you under the Apache License, Version 2.0 (the\n * \"License\"); you may not use this file except in compliance\n * with the License.  You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing,\n * software distributed under the License is distributed on an\n * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n * KIND, either express or implied.  See the License for the\n * specific language governing permissions and limitations\n * under the License.\n */\nimport { api, JsonResponse } from './queryApi';\n\nexport type FetchValidationQueryParams = {\n  dbId?: string | number;\n  catalog?: string | null;\n  schema?: string;\n  sql: string;\n  templateParams?: string;\n};\n\ntype ValidationResult = {\n  end_column: number | null;\n  line_number: number | null;\n  message: string | null;\n  start_column: number | null;\n};\n\nconst queryValidationApi = api.injectEndpoints({\n  endpoints: builder => ({\n    queryValidations: builder.query<\n      ValidationResult[],\n      FetchValidationQueryParams\n    >({\n      providesTags: ['QueryValidations'],\n      query: ({ dbId, catalog, schema, sql, templateParams }) => {\n        let template_params = templateParams;\n        try {\n          template_params = JSON.parse(templateParams || '');\n        } catch (e) {\n          template_params = undefined;\n        }\n        const postPayload = {\n          catalog,\n          schema,\n          sql,\n          ...(template_params && { template_params }),\n        };\n        return {\n          method: 'post',\n          endpoint: `/api/v1/database/${dbId}/validate_sql/`,\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify(postPayload),\n          transformResponse: ({ json }: JsonResponse) => json.result,\n        };\n      },\n    }),\n  }),\n});\n\nexport const { useQueryValidationsQuery } = queryValidationApi;\n"],"names":["componentShape","PropTypes","id","isRequired","type","Object","values","componentTypes","parents","children","meta","width","height","headerSize","headerStyleOptions","map","opt","value","background","backgroundStyleOptions","chartId","chartPropShape","chartAlert","chartStatus","chartUpdateEndTime","chartUpdateStartTime","latestQueryFormData","queryController","abort","queriesResponse","triggerQuery","lastRendered","slicePropShape","slice_id","slice_url","slice_name","datasource","datasource_name","datasource_link","changed_on","modified","viz_type","description","description_markeddown","owners","dashboardFilterPropShape","componentId","filterName","datasourceId","directPathToFilter","isDateFilter","isInstantFilter","columns","labels","scopes","dashboardStatePropShape","sliceIds","expandedSlices","editMode","isPublished","colorNamespace","colorScheme","updatedColorScheme","hasUnsavedChanges","dashboardInfoPropShape","metadata","slug","dash_edit_perm","dash_save_perm","common","userId","leafType","label","parentShape","f","apply","arguments","lazyFunction","filterScopeSelectorTreeNodePropShape","assembleEndpoint","dashId","key","tabId","endpoint","concat","updateFilterKey","SupersetClient","put","jsonPayload","then","r","json","message","catch","err","logging","error","createFilterKey","post","undefined","getFilterValue","get","JSON","parse","getPermalinkValue","getChartIdsFromLayout","layout","reduce","chartIds","currentComponent","CHART_TYPE","push","USER_CONTENT_COMPONENT_TYPE","MARKDOWN_TYPE","DYNAMIC_TYPE","isDashboardEmpty","some","includes","propTypes","actions","addSliceToDashboard","removeSliceFromDashboard","logEvent","clearDataMaskState","dashboardInfo","dashboardState","slices","activeFilters","chartConfiguration","datasources","ownDataCharts","impressionId","timeout","Dashboard","PureComponent","onBeforeUnload","hasChanged","window","addEventListener","unload","removeEventListener","t","event","returnValue","constructor","props","_props$activeFilters","_props$ownDataCharts","super","this","appliedFilters","appliedOwnDataCharts","onVisibilityChange","bind","componentDidMount","bootstrapData","getBootstrapData","eventData","is_soft_navigation","Logger","timeOriginOffset","is_edit_mode","mount_duration","getTimestamp","is_empty","is_published","bootstrap_data_length","length","directLinkComponentId","getLocationHash","target_id","LOG_ACTIONS_MOUNT_DASHBOARD","document","visibilityState","visibilityEventData","start_offset","ts","Date","getTime","applyCharts","componentDidUpdate","UNSAFE_componentWillReceiveProps","nextProps","currentChartIds","nextChartIds","filter","indexOf","forEach","newChartId","find","removedChartId","isFeatureEnabled","FeatureFlag","DashboardCrossFilters","areObjectsEqual","ignoreUndefined","applyFilters","componentWillUnmount","logStart","LOG_ACTIONS_HIDE_BROWSER_TAB","duration","currFilterKeys","keys","appliedFilterKeys","allKeys","Set","affectedChartIds","getAffectedOwnDataCharts","appliedChartIds","affectedIds","a","b","x","arrayDiff","filterKey","scope","chartsInScope","refreshCharts","ids","render","context","loading","_jsx","Loading","contextType","PluginContext","defaultProps","connect","state","_dashboardInfo$common","_dashboardInfo$common2","_dashboardInfo$metada","_dashboardInfo$metada2","sliceEntities","dataMask","dashboardLayout","nativeFilters","conf","SUPERSET_WEBSERVER_TIMEOUT","getActiveFilters","getAllActiveFilters","chart_configuration","filters","allSliceIds","getRelevantDataMask","present","dispatch","bindActionCreators","setDatasources","headerStyles","theme","css","typography","weights","bold","sizes","xxl","gridUnit","xl","l","chartHeaderStyles","filterCardPopoverStyle","chartContextMenuStyles","focusStyle","colors","primary","dark1","EMPTY_OBJECT","getDashboardContextLocalStorage","dashboardsContexts","getItem","LocalStorageKeys","DashboardExploreContext","fromEntries","entries","isRedundant","updateDashboardTabLocalStorage","dashboardPageId","dashboardContext","setItem","SyncDashboardState","dashboardContextForExplore","useSelector","_dashboardInfo$metada3","labelsColor","label_colors","labelsColorMap","shared_label_colors","acc","filterValue","_pick","dashboardId","filterBoxFilters","shallowEqual","useEffect","DashboardPageIdContext","createContext","DashboardBuilder","lazy","originalDocumentTitle","title","DashboardPage","idOrSlug","useTheme","useDispatch","history","useHistory","useMemo","nanoid","hasDashboardInfoInitiated","addDangerToast","useToasts","result","dashboard","dashboardApiError","useDashboard","charts","chartsApiError","useDashboardCharts","datasets","datasetsApiError","status","useDashboardDatasets","isDashboardHydrated","useRef","readyToRender","Boolean","dashboard_title","handleTabClose","setDatasetsStatus","async","permalinkKey","getUrlParam","URL_PARAMS","nativeFilterKeyValue","nativeFiltersKey","isOldRison","activeTabs","permalinkValue","current","hydrateDashboard","getDataMaskApplied","injectCustomCss","_jsxs","_Fragment","Global","styles","Provider","DashboardContainer","prop","item","prev","next","filterId","extraFormData","_ref","_ref2","_nativeFilters$filter","_nativeFilters$filter2","_chartConfiguration$f","_chartConfiguration$f2","crossFilters","BACKGROUND_TRANSPARENT","className","BACKGROUND_WHITE","SMALL_HEADER","MEDIUM_HEADER","LARGE_HEADER","head","getElementsByTagName","style","querySelector","createElement","createStyleElement","styleSheet","cssText","innerHTML","appendChild","remove","catalogApi","api","injectEndpoints","endpoints","builder","catalogs","query","providesTags","dbId","forceRefresh","urlParams","force","transformResponse","sort","serializeQueryArgs","queryArgs","useLazyCatalogsQuery","useCatalogsQuery","catalogEndpoints","util","catalogApiUtil","EMPTY_CATALOGS","useCatalogs","options","onSuccess","onError","trigger","skip","fetchData","useEffectEvent","currentData","isSuccess","isError","data","refetch","useCallback","extractOwnerNames","owner","first_name","last_name","ownerNamesQuery","rison","useChartOwnerNames","useTransformedResource","useApiV1Resource","json_metadata","position_data","position_json","queryValidationApi","queryValidations","catalog","schema","sql","templateParams","template_params","e","postPayload","method","headers","body","stringify","useQueryValidationsQuery"],"sourceRoot":""}