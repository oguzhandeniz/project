"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[630],{52630:(e,a,t)=>{a.iB=a.YM=void 0;var n=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},r=s(t(67294)),i=s(t(45697)),o=t(2371);function s(e){return e&&e.__esModule?e:{default:e}}a.YM=function(e){var a=e.itemTypeToComponent,t=e.WrapperComponent,s=void 0===t?"div":t,l=function(e){var t=e.currentPage,i=e.totalPages,l=e.boundaryPagesRange,u=e.siblingPagesRange,d=e.hideEllipsis,g=e.hidePreviousAndNextPageLinks,c=e.hideFirstAndLastPageLinks,P=e.onChange,h=e.disabled,E=function(e,a){var t={};for(var n in e)a.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}(e,["currentPage","totalPages","boundaryPagesRange","siblingPagesRange","hideEllipsis","hidePreviousAndNextPageLinks","hideFirstAndLastPageLinks","onChange","disabled"]),p=(0,o.getPaginationModel)({currentPage:t,totalPages:i,boundaryPagesRange:l,siblingPagesRange:u,hideEllipsis:d,hidePreviousAndNextPageLinks:g,hideFirstAndLastPageLinks:c}),b=function(e,a,t){return function(i){var o,s,l,u=e[i.type],d=(s=(o=i).value,l=o.isDisabled,function(){!l&&t&&a!==s&&t(s)});return r.default.createElement(u,n({onClick:d},i))}}(a,t,P);return r.default.createElement(s,E,p.map((function(e){return b(n({},e,{isDisabled:!!h}))})))};return l.propTypes={currentPage:i.default.number.isRequired,totalPages:i.default.number.isRequired,boundaryPagesRange:i.default.number,siblingPagesRange:i.default.number,hideEllipsis:i.default.bool,hidePreviousAndNextPageLinks:i.default.bool,hideFirstAndLastPageLinks:i.default.bool,onChange:i.default.func,disabled:i.default.bool},l},a.iB=o.ITEM_TYPES},51360:(e,a,t)=>{t.d(a,{Z:()=>_});var n=t(67294),r=t(15926),i=t.n(r),o=t(74069),s=t(84101),l=t(49238),u=t(51995),d=t(31069),g=t(61988),c=t(77808),P=t(4715),h=t(35932),E=t(48273),p=t(35944);const b=u.iK.div`
  .ant-select-dropdown {
    max-height: ${({theme:e})=>40*e.gridUnit}px;
  }
  .tag-input {
    margin-bottom: ${({theme:e})=>3*e.gridUnit}px;
  }
`;var v;!function(e){e.Chart="chart",e.Dashboard="dashboard",e.SavedQuery="query"}(v||(v={}));const _=({show:e,onHide:a,editTag:t,refreshData:r,addSuccessToast:u,addDangerToast:_,clearOnHide:S=!1})=>{const[m,I]=(0,n.useState)([]),[L,f]=(0,n.useState)([]),[T,y]=(0,n.useState)([]),[N,A]=(0,n.useState)(""),[M,R]=(0,n.useState)(""),k=!!t,w=k?"Edit Tag":"Create Tag",C=()=>{A(""),R(""),I([]),f([]),y([])};(0,n.useEffect)((()=>{const e={[v.Dashboard]:[],[v.Chart]:[],[v.SavedQuery]:[]},a=({id:a,name:t,type:n})=>{const r=e[n];r&&r.push({value:a,label:t,key:a})};I([]),f([]),y([]),k&&((0,E.AN)({tagIds:[t.id],types:null},(t=>{t.forEach(a),I(e[v.Dashboard]),f(e[v.Chart]),y(e[v.SavedQuery])}),(e=>{_("Error Fetching Tagged Objects")})),A(t.name),R(t.description))}),[t]);const K=async(e,a,t,n,r,o,s)=>{const l=i().encode({columns:n,filters:[{col:r,opr:"ct",value:e}],page:a,order_column:o}),{json:u}=await d.Z.get({endpoint:`/api/v1/${s}/?q=${l}`}),{result:g,count:c}=u;return{data:g.map((e=>({value:e.id,label:e[r]}))),totalCount:c}},Z=(e,a)=>{e===v.Dashboard?I(a):e===v.Chart?f(a):e===v.SavedQuery&&y(a)};return(0,p.tZ)(o.default,{title:w,onHide:()=>{S&&C(),a()},show:e,footer:(0,p.BX)("div",{children:[(0,p.tZ)(h.Z,{buttonStyle:"secondary",onClick:a,children:(0,g.t)("Cancel")}),(0,p.tZ)(h.Z,{buttonStyle:"primary",onClick:()=>{const e=m.map((e=>["dashboard",e.value])),n=L.map((e=>["chart",e.value])),i=T.map((e=>["query",e.value]));k?d.Z.put({endpoint:`/api/v1/tag/${t.id}`,jsonPayload:{description:M,name:N,objects_to_tag:[...e,...n,...i]}}).then((({json:e={}})=>{r(),C(),u((0,g.t)("Tag updated")),a()})).catch((e=>{_(e.message||"Error Updating Tag")})):d.Z.post({endpoint:"/api/v1/tag/",jsonPayload:{description:M,name:N,objects_to_tag:[...e,...n,...i]}}).then((({json:e={}})=>{r(),C(),u((0,g.t)("Tag created")),a()})).catch((e=>_(e.message||"Error Creating Tag")))},children:(0,g.t)("Save")})]}),children:(0,p.BX)(b,{children:[(0,p.tZ)(l.lX,{children:(0,g.t)("Tag name")}),(0,p.tZ)(c.default,{className:"tag-input",onChange:e=>A(e.target.value),placeholder:(0,g.t)("Name of your tag"),value:N}),(0,p.tZ)(l.lX,{children:(0,g.t)("Description")}),(0,p.tZ)(c.default,{className:"tag-input",onChange:e=>R(e.target.value),placeholder:(0,g.t)("Add description of your tag"),value:M}),(0,p.tZ)(P.iz,{}),(0,p.tZ)(s.Z,{className:"tag-input",ariaLabel:(0,g.t)("Select dashboards"),mode:"multiple",name:"dashboards",value:m,options:async(e,a,t)=>K(e,a,0,["id","dashboard_title"],"dashboard_title","dashboard_title","dashboard"),onChange:e=>Z(v.Dashboard,e),header:(0,p.tZ)(l.lX,{children:(0,g.t)("Dashboards")}),allowClear:!0}),(0,p.tZ)(s.Z,{className:"tag-input",ariaLabel:(0,g.t)("Select charts"),mode:"multiple",name:"charts",value:L,options:async(e,a,t)=>K(e,a,0,["id","slice_name"],"slice_name","slice_name","chart"),onChange:e=>Z(v.Chart,e),header:(0,p.tZ)(l.lX,{children:(0,g.t)("Charts")}),allowClear:!0}),(0,p.tZ)(s.Z,{className:"tag-input",ariaLabel:(0,g.t)("Select saved queries"),mode:"multiple",name:"savedQueries",value:T,options:async(e,a,t)=>K(e,a,0,["id","label"],"label","label","saved_query"),onChange:e=>Z(v.SavedQuery,e),header:(0,p.tZ)(l.lX,{children:(0,g.t)("Saved queries")}),allowClear:!0})]})})}},83379:(e,a,t)=>{function n(e){return e?`${e.first_name} ${e.last_name}`:""}t.d(a,{Z:()=>n})},56590:(e,a)=>{a.ITEM_TYPES={PAGE:"PAGE",ELLIPSIS:"ELLIPSIS",FIRST_PAGE_LINK:"FIRST_PAGE_LINK",PREVIOUS_PAGE_LINK:"PREVIOUS_PAGE_LINK",NEXT_PAGE_LINK:"NEXT_PAGE_LINK",LAST_PAGE_LINK:"LAST_PAGE_LINK"},a.ITEM_KEYS={FIRST_ELLIPSIS:-1,SECOND_ELLIPSIS:-2,FIRST_PAGE_LINK:-3,PREVIOUS_PAGE_LINK:-4,NEXT_PAGE_LINK:-5,LAST_PAGE_LINK:-6}},53804:(e,a,t)=>{var n=t(56590);a.createFirstEllipsis=function(e){return{type:n.ITEM_TYPES.ELLIPSIS,key:n.ITEM_KEYS.FIRST_ELLIPSIS,value:e,isActive:!1}},a.createSecondEllipsis=function(e){return{type:n.ITEM_TYPES.ELLIPSIS,key:n.ITEM_KEYS.SECOND_ELLIPSIS,value:e,isActive:!1}},a.createFirstPageLink=function(e){var a=e.currentPage;return{type:n.ITEM_TYPES.FIRST_PAGE_LINK,key:n.ITEM_KEYS.FIRST_PAGE_LINK,value:1,isActive:1===a}},a.createPreviousPageLink=function(e){var a=e.currentPage;return{type:n.ITEM_TYPES.PREVIOUS_PAGE_LINK,key:n.ITEM_KEYS.PREVIOUS_PAGE_LINK,value:Math.max(1,a-1),isActive:1===a}},a.createNextPageLink=function(e){var a=e.currentPage,t=e.totalPages;return{type:n.ITEM_TYPES.NEXT_PAGE_LINK,key:n.ITEM_KEYS.NEXT_PAGE_LINK,value:Math.min(t,a+1),isActive:a===t}},a.createLastPageLink=function(e){var a=e.currentPage,t=e.totalPages;return{type:n.ITEM_TYPES.LAST_PAGE_LINK,key:n.ITEM_KEYS.LAST_PAGE_LINK,value:t,isActive:a===t}},a.createPageFunctionFactory=function(e){var a=e.currentPage;return function(e){return{type:n.ITEM_TYPES.PAGE,key:e,value:e,isActive:e===a}}}},1158:(e,a)=>{a.createRange=function(e,a){for(var t=[],n=e;n<=a;n++)t.push(n);return t}},2371:(e,a,t)=>{var n=t(1158),r=t(53804);a.getPaginationModel=function(e){if(null==e)throw new Error("getPaginationModel(): options object should be a passed");var a=Number(e.totalPages);if(isNaN(a))throw new Error("getPaginationModel(): totalPages should be a number");if(a<0)throw new Error("getPaginationModel(): totalPages shouldn't be a negative number");var t=Number(e.currentPage);if(isNaN(t))throw new Error("getPaginationModel(): currentPage should be a number");if(t<0)throw new Error("getPaginationModel(): currentPage shouldn't be a negative number");if(t>a)throw new Error("getPaginationModel(): currentPage shouldn't be greater than totalPages");var i=null==e.boundaryPagesRange?1:Number(e.boundaryPagesRange);if(isNaN(i))throw new Error("getPaginationModel(): boundaryPagesRange should be a number");if(i<0)throw new Error("getPaginationModel(): boundaryPagesRange shouldn't be a negative number");var o=null==e.siblingPagesRange?1:Number(e.siblingPagesRange);if(isNaN(o))throw new Error("getPaginationModel(): siblingPagesRange should be a number");if(o<0)throw new Error("getPaginationModel(): siblingPagesRange shouldn't be a negative number");var s=Boolean(e.hidePreviousAndNextPageLinks),l=Boolean(e.hideFirstAndLastPageLinks),u=Boolean(e.hideEllipsis),d=u?0:1,g=[],c=r.createPageFunctionFactory(e);if(l||g.push(r.createFirstPageLink(e)),s||g.push(r.createPreviousPageLink(e)),1+2*d+2*o+2*i>=a){var P=n.createRange(1,a).map(c);g.push.apply(g,P)}else{var h=i,E=n.createRange(1,h).map(c),p=a+1-i,b=a,v=n.createRange(p,b).map(c),_=Math.min(Math.max(t-o,h+d+1),p-d-2*o-1),S=_+2*o,m=n.createRange(_,S).map(c);if(g.push.apply(g,E),!u){var I=_-1,L=(I===h+1?c:r.createFirstEllipsis)(I);g.push(L)}if(g.push.apply(g,m),!u){var f=S+1,T=(f===p-1?c:r.createSecondEllipsis)(f);g.push(T)}g.push.apply(g,v)}return s||g.push(r.createNextPageLink(e)),l||g.push(r.createLastPageLink(e)),g};var i=t(56590);a.ITEM_TYPES=i.ITEM_TYPES,a.ITEM_KEYS=i.ITEM_KEYS}}]);
//# sourceMappingURL=f6657e107c44b3a3848f.chunk.js.map